(e=>{const t=document.currentScript.getAttribute("elements-selector")||".impression",r=document.currentScript.getAttribute("visible-fraction")||.5;if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e){"isVisible"in IntersectionObserverEntry.prototype&&(IntersectionObserverEntry.prototype.isVisible=!0);const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting&&e.isVisible){const r=new Event("impression");e.target.dispatchEvent(r),t.unobserve(e.target)}}))}),{threshold:r,trackVisibility:!0,delay:100});document.querySelectorAll(t).forEach((t=>{e.observe(t)}))}})(window);