(e=>{const{document:t,IntersectionObserver:i,IntersectionObserverEntry:r}=e,n=t.currentScript,s=n.getAttribute("elements-selector")||".impression",o=n.getAttribute("visible-fraction")||.5,c=n.getAttribute("visible-fractioff")||0;if(i&&r&&"intersectionRatio"in r.prototype){const e=(e,t)=>{e.forEach((({target:e,isIntersecting:i,intersectionRatio:s})=>{const b=""==e.getAttribute("impression");i?(!b&&s>=o&&r(e),b&&s<=c&&(n(e),t.unobserve(e))):b&&(n(e),t.unobserve(e))}))},r=e=>{const t=new Event("impression");e.setAttribute("impression",""),e.dispatchEvent(t)},n=e=>{const t=new Event("impressioff");e.dispatchEvent(t),e.removeAttribute("impression")},b=new i(e,{threshold:[c,o]});t.querySelectorAll(s).forEach((e=>{b.observe(e)}))}})(window);