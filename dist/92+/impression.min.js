(e=>{const{document:t,IntersectionObserver:n,IntersectionObserverEntry:r}=e,s=t.currentScript,o=s.getAttribute("elements-selector")||".impression",i=s.getAttribute("visible-fraction")||.5;if(n&&r){const r=(e,t)=>{e.forEach((({isIntersecting:e,target:n})=>{e&&(s(n),t.unobserve(n))}))},s=e=>{const t=new Event("impression");e.dispatchEvent(t)},c=new n(r,{threshold:i}),a=()=>{t.querySelectorAll(o).forEach((e=>{c.observe(e)}))};e.addEventListener?e.addEventListener("load",a,!0):e.attachEvent?e.attachEvent("onload",a):a()}})(window);