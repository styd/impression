(t=>{const{document:e,IntersectionObserver:r,IntersectionObserverEntry:i,Event:n}=t,s=e.currentScript.getAttribute("elements-selector")||".impression",o=e.currentScript.getAttribute("visible-fraction")||.5,c=e.currentScript.getAttribute("visible-fractioff")||0;if(r&&i&&"intersectionRatio"in i.prototype){const t=(t,e)=>{t.forEach((({target:t,isIntersecting:r,intersectionRatio:n})=>{const s=""==t.getAttribute("impression");r?(!s&&n>=o&&i(t),s&&n<=c&&(b(t),e.unobserve(t))):s&&(b(t),e.unobserve(t))}))},i=t=>{const e=new n("impression");t.setAttribute("impression",""),t.dispatchEvent(e)},b=t=>{const e=new n("impressioff");t.dispatchEvent(e),t.removeAttribute("impression")},p=new r(t,{threshold:[c,o]});e.querySelectorAll(s).forEach((t=>{p.observe(t)}))}})(window);